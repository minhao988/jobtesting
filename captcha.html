<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>滑塊驗證 Demo</title>
<style>
  body { font-family: Arial; text-align: center; margin-top: 50px; }
  #sliderContainer {
    width: 300px; height: 50px; background: #eee; margin: 0 auto;
    position: relative; border-radius: 8px;
  }
  #slider {
    width: 50px; height: 50px; background: #4CAF50; border-radius: 8px;
    position: absolute; left: 0; top: 0; cursor: pointer; transition: background 0.2s;
  }
  #slider.success { background: #2ecc71; }
  #slider.failure { background: #e74c3c; }
</style>
</head>
<body>

<h2>請拖曳滑塊完成驗證</h2>
<div id="sliderContainer">
  <div id="slider"></div>
</div>
<p id="status"></p>

<script>
const slider = document.getElementById("slider");
const container = document.getElementById("sliderContainer");
const status = document.getElementById("status");

let dragging = false;
let startX = 0;

// 隨機終點位置 (增加難度)
const endPos = Math.floor(Math.random() * 50) + 230; // 230 ~ 280 px

slider.addEventListener("mousedown", (e) => {
  dragging = true;
  startX = e.clientX - slider.offsetLeft;
});

document.addEventListener("mouseup", () => {
  if (!dragging) return;
  dragging = false;
  // 判斷是否接近終點
  if (slider.offsetLeft >= endPos - 5 && slider.offsetLeft <= endPos + 5) {
    slider.style.left = endPos + "px";
    slider.classList.add("success");
    status.textContent = "驗證成功！✅";
    status.style.color = "green";
  } else {
    slider.classList.add("failure");
    status.textContent = "驗證失敗，再試一次 ❌";
    status.style.color = "red";
    setTimeout(() => {
      slider.style.left = "0px";
      slider.classList.remove("failure");
    }, 800);
  }
});

document.addEventListener("mousemove", (e) => {
  if (!dragging) return;
  let x = e.clientX - startX;
  if (x < 0) x = 0;
  if (x > container.offsetWidth - slider.offsetWidth) x = container.offsetWidth - slider.offsetWidth;
  slider.style.left = x + "px";
});
</script>

</body>
</html>
